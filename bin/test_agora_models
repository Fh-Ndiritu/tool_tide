#!/usr/bin/env rails runner

puts "\nü§ñ Testing Agora Models Connection...\n"
puts "=" * 50

AGORA_MODELS.each do |config|
  location = config[:location] || "default"
  puts "\nTesting #{config[:user_name]} (#{config[:publisher]}/#{config[:model_name]}) @ #{location}..."

  begin
    client = Agora::LLMClient.client_for(config)

    # Simple prompt to verify identity/responsiveness
    response = client.ask("Briefly introduce yourself in 1 sentence.")

    if response.content.present?
      puts "‚úÖ Success: \"#{response.content.strip.truncate(100)}\""
    else
      puts "‚ö†Ô∏è  Empty Response (Check Logs)"
    end

  rescue => e
    puts "‚ùå Failed: #{e.message}"
    puts "   Publisher: #{config[:publisher]}, Model: #{config[:model_name]}"
    puts "   Location: #{location}"
    puts "   Tip: Check publisher/model_name/location in constants.rb"
  end
  puts "-" * 50
end

puts "\nDone.\n"

