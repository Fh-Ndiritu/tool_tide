<div class="container mx-auto px-4 py-8">
  <div class="mb-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <%= link_to admin_projects_path, class: "p-2 rounded-full hover:bg-gray-100 text-gray-500" do %>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
        </svg>
      <% end %>
      <div>
        <h1 class="text-2xl font-bold text-gray-900"><%= @project.title %></h1>
        <p class="text-sm text-gray-500">Created by <%= @project.user.email %> on <%= @project.created_at.strftime("%B %d, %Y") %></p>
      </div>
    </div>
    <%= link_to "Open in App", project_path(@project), target: "_blank", class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm" %>
  </div>

  <div class="space-y-12">
    <% @project.designs.each do |design| %>
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
          <h2 class="text-lg font-semibold text-gray-900"><%= design.title %></h2>
          <span class="text-xs font-mono text-gray-500">ID: <%= design.id %></span>
        </div>

        <div class="p-6">
           <% if design.project_layers.any? %>
             <div class="overflow-x-auto pb-4">
               <%# Render only roots, the partial handles recursion %>
               <% design.project_layers.roots.order(:created_at).each do |root_layer| %>
                  <div class="-ml-4"> <!-- Offset the first level indentation -->
                    <%= render partial: "admin/projects/layer", locals: { layer: root_layer } %>
                  </div>
               <% end %>
             </div>
           <% else %>
             <p class="text-gray-500 italic text-center py-8">No layers in this design.</p>
           <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
