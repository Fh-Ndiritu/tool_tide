<div class="container mx-auto p-4 w-full lg:w-9/12">
  <h1 class="text-3xl font-extrabold mb-10 text-neutral-800 mt-8 w-full text-center">
    Your <span class="text-secondary">Credit</span> Balance
  </h1>

  <div class="flex flex-col mb-12">
    <%# --- SINGLE PURPLE CARD WITH ALL CONTENT --- %>
    <div
      class="
        bg-accent-secondary text-neutral-900 rounded-2xl shadow-2xl p-8 border-4 border-secondary
        transition-all duration-300 hover:shadow-secondary/50 hover:scale-[1.01]
      "
    >
      <%# SECTION 1: REMAINING CREDITS INFO %>
      <div class="flex items-center space-x-3 mb-6">
        <div class="bg-secondary text-neutral-100 p-3 rounded-full shadow-lg m-0">
          <%= render(IconComponent.new(name: "crown", classes: "h-7 w-7")) %>
        </div>
        <h2 class="text-2xl font-bold text-neutral-900 ml-2">
          Your Usage Credits
        </h2>
      </div>

      <p class="text-6xl font-extrabold text-accent mt-4 leading-tight">
        <%= current_user.pro_engine_credits %>
      </p>

      <p class="text-lg text-neutral-700 mt-2">
        Remaining credits for all AI design features.
      </p>

      <% if defined?(current_user) && current_user.pro_engine_credits.positive? %>
        <div class="flex justify-start mt-6">
          <%= link_to "Go to Design Editor â†’", new_canva_path, class: "text-lg font-semibold text-primary hover:text-secondary transition-colors duration-200" %>
        </div>
      <% end %>

      <hr class="border-t border-neutral-300 my-8">

      <%# SECTION 2: CREDITS INFO & PAYPAL PAYMENT %>
      <div class="text-center mb-6">
        <p class="text-lg text-green-700 font-semibold">
          <b><%= CREDITS_INFO %></b>
        </p>
      </div>

      <div class="bg-gray-100 p-4 sm:p-6 rounded-lg border border-gray-300 mb-8">
        <div class="flex items-start space-x-3 mb-4">
          <span class="text-xl pt-0.5 text-secondary flex-shrink-0">ğŸ›¡ï¸</span>
          <div>
            <h4 class="text-sm font-bold text-neutral-900 mb-1 uppercase">
              Secure & Trusted Payment
            </h4>
            <p class="text-neutral-700 text-xs sm:text-sm">
              Your payment is secure.
              <b>PayPal</b> uses bank-grade
              <b>PCI DSS standards</b>, ensuring we
              <b>never store</b> your credit card details.
            </p>
          </div>
        </div>

        <div class="w-full pt-4 border-t border-neutral-300 mt-4">
          <%# PayPal Button Container %>
          <div
            data-controller="paypal"
            data-paypal-client-id-value="<%= ENV['PAYPAL_CLIENT_ID'] %>"
            class="w-full max-w-md mx-auto"
          >
            <!-- PayPal Buttons will be rendered here -->
          </div>
        </div>
      </div>

      <hr class="border-t border-neutral-300 my-8">

      <%# SECTION 3: PREMIUM FEATURES BENEFITS %>
      <h3 class="text-2xl font-extrabold mb-6 text-secondary">
        Access Premium Features
      </h3>

      <ul class="space-y-4">
        <li class="flex items-start space-x-3">
          <%= render(IconComponent.new(name: "check", classes: "h-6 w-6 text-accent flex-shrink-0 mt-0.5")) %>
          <span class="font-semibold text-neutral-900">More realistic and accurate generations</span>
        </li>
        <li class="flex items-start space-x-3">
          <%= render(IconComponent.new(name: "check", classes: "h-6 w-6 text-accent flex-shrink-0 mt-0.5")) %>
          <span class="font-semibold text-neutral-900">Design with <b>local plants</b> available in your area.</span>
        </li>
        <li class="flex items-start space-x-3">
          <%= render(IconComponent.new(name: "check", classes: "h-6 w-6 text-accent flex-shrink-0 mt-0.5")) %>
          <span class="font-semibold text-neutral-900">
            Generate <b>comprehensive shopping lists</b> for your materials.
          </span>
        </li>
        <li class="flex items-start space-x-3">
          <%= render(IconComponent.new(name: "check", classes: "h-6 w-6 text-accent flex-shrink-0 mt-0.5")) %>
          <span class="font-semibold text-neutral-900">Get planting and maintenance guides for your final design.</span>
        </li>
      </ul>
    </div>
  </div>
</div>
