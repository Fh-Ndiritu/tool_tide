<% content_for(:title, "Your AI Landscaping Designs | Hadaa Ai ") %>
<% content_for(:description, "View your stunning AI-generated landscaping designs on Hadaa Ai . See your original garden alongside multiple transformed versions.") %>
<% content_for(:keywords, "AI landscaping results, garden designs, transformed landscapes, Hadaa Ai gallery") %>

<%# Open Graph (Social Media Sharing) - You might want to dynamically set og:image to one of the modified images %>
<%= content_for(:og_title, "My Transformed Landscape with Hadaa Ai ") %>
<%= content_for(:og_description, "Check out my amazing garden transformation, created with Hadaa Ai 's free AI landscaping tool!") %>
<%= content_for(:og_image, @landscape.modified_images.first.present? ? url_for(@landscape.modified_images.first) : url_for(@landscape.original_image) ) %>
<%= content_for(:og_image_alt, "AI-generated transformed landscape by Hadaa Ai ") %>

<%# Twitter Card (Social Media Sharing) %>
<%= content_for(:twitter_title, "My New Garden Design by Hadaa Ai ") %>
<%= content_for(:twitter_description, "See how AI transformed my garden! Free and realistic designs from Hadaa Ai .") %>
<%= content_for(:twitter_image, @landscape.modified_images.first.present? ? url_for(@landscape.modified_images.first) : url_for(@landscape.original_image) ) %>
<%= content_for(:twitter_image_alt, "Vibrant AI-generated landscaping image from Hadaa Ai ") %>

<%= content_for(:schema_name, "Hadaa Ai - Transformed Landscape View") %>
<%= content_for(:schema_description, "View the original and AI-enhanced versions of your landscape design created using Hadaa Ai .") %>
<%= content_for(:main_classes, "container mx-auto px-5 flex max-w-[1200px] text-neutral-800 mt-10") %>

<div class="min-h-screen bg-neutral-100  items-center justify-center w-full">
  <div class="pb-6">
      <% if @reverted_to_bria %>
        <div class="flex w-full text-center text-secondary flex-col my-2">

          <h4 class="text-2xl font-bold text-center mb-2">Hadaa Pro Engine daily limit reached! Reverting to free version...</h4>

          <p class="mb-2">You can continue generating landscapes using Hadaa Free Engine. Check back tomorrow for more free credits! </p>
          <a href="mailto:fhndiritu@gmail.com">As always, you can reach out to me <b>fhndiritu@gmail.com</b> for assistance!</a>

        </div>
        <% else %>
          <h1 class="text-4xl font-bold text-center text-text-primary">You have a new look!</h1>
      <% end %>

  </div>

  <%# Container for the grid with relative positioning and padding for the absolute card %>
  <div class="relative w-full max-w-full lg:max-w-6xl  shadow-xl rounded-lg p-6 sm:p-8 pt-20 sm:pt-24 lg:pt-28 border-2 border-dashed border-neutral-300 mt-20">

    <%# Absolute Card - Positioned at top-center and overlapping %>
    <div class="absolute-card absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2  border-4 border-gray-200 rounded-full shadow-lg z-10 w-48 h-48 flex items-center justify-center">
      <% if @landscape.original_image.attached? %>
        <%= image_tag url_for(@landscape.original_image), alt: "Original Landscape", class: "w-full h-full object-cover rounded-full" %>
      <% else %>
        <p class="text-neutral-600 text-xs text-center p-1">No image</p>
      <% end %>
    </div>

    <div class="pt-0">
          <%# Action Buttons moved up %>
        <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-4">
          <%= link_to "Edit Further", edit_landscape_path(@landscape),
                      class: "bg-secondary text-text-light py-3 px-6 rounded-md hover:bg-text-secondary transition-colors duration-200 font-bold text-lg text-center" %>
          <%= link_to "New Design", new_landscape_path,
                      class: "bg-neutral-300 text-neutral-800 py-3 px-6 rounded-md hover:bg-neutral-500 transition-colors duration-200 font-bold text-lg text-center" %>
        </div>

        <% if @landscape.modified_images.any? %>
            <% @landscape.landscape_requests.order(id: :desc).each_with_index do |request| %>
            <% next unless request.modified_images.attached? %>
              <div class="bg-neutral-100 shadow-sm rounded px-4">
              <%= content_tag :h4, "#{request.preset} Style Results from #{t("landscape.engines.#{request.image_engine}")}", class: "py-4 text-accent block w-full text-center text-lg text-fancy"%>
              <div class="grid grid-cols-1 md:grid-cols-2 md:grid-cols-3 gap-3">
                <% request.modified_images.each_with_index do |modified_image, index| %>
                  <div class=" mb-6 bg-neutral-50 rounded-lg shadow-sm overflow-hidden flex flex-col items-center text-center p-2">
                    <%= image_tag url_for(modified_image), alt: "AI Modified Landscape #{index + 1}", class: "max-w-full h-auto object-cover rounded-md border border-neutral-100 shadow-sm" %>

                    <a href="<%= url_for(modified_image) %>" download="hadaa_ai_transformed_<%= index + 1 %>.png"
                    class="mt-2 inline-block bg-accent hover:bg-secondary text-text-light font-bold py-2 px-3 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105"
                      >Download
                    </a>
                  </div>
                <% end %>
              </div>
              </div>
            <% end %>
        <% else %>
          <div class="text-center p-4">
            <p class="text-lg text-neutral-600">No Landscape generations found yet.</p>
            <p class="text-sm text-neutral-500">Please return to the editor to generate designs.</p>
          </div>
        <% end %>
    </div>

  </div>
</div>
