<% mask_request ||= @mask_request %>

<div id="plant_list" class="mt-8">
  <h4 class="text-2xl font-bold mb-4 text-text-dark">Recommended Plants</h4>

  <% if mask_request.mask_request_plants.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <% mask_request.mask_request_plants.each do |mrp| %>
        <div
          class="
            bg-white rounded-2xl p-6 border border-gray-100 shadow-sm
            hover:shadow-xl hover:border-green-300 transition-all
            duration-300 group relative overflow-hidden
          "
        >
          <!-- Decorative Background Gradient -->
          <div
            class="
              absolute top-0 right-0 w-32 h-32 bg-gradient-to-br
              from-green-50 to-transparent rounded-bl-full opacity-50
              group-hover:opacity-100 transition-opacity
            "
          ></div>

          <!-- Remove Button -->
          <%= button_to remove_plant_mask_request_path(mask_request, plant_id: mrp.id), method: :delete, class: "absolute top-3 right-3 p-2 bg-green-100 text-green-800 backdrop-blur-sm rounded-full shadow-sm border border-gray-100 text-gray-400 hover:text-red-500 hover:bg-red-50 hover:border-red-100 transition-all z-10 transform hover:scale-110", title: "Remove plant" do %>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="w-4 h-4"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          <% end %>

          <div class="relative z-0">
            <div class="flex justify-between items-start mb-4 pr-10">
              <h4
                class="
                  font-bold text-xl text-gray-900 group-hover:text-green-700
                  transition-colors leading-tight
                "
              >
                <%= mrp.plant.english_name %>
              </h4>
            </div>

            <% if mrp.plant.validated? %>
              <p
                class="
                  text-gray-600 text-sm mb-6 leading-relaxed min-h-[3rem]
                  line-clamp-3
                "
              >
                <%= mrp.plant.description %>
              </p>
              <div
                class="
                  flex items-center justify-between mt-auto pt-4 border-t
                  border-gray-100
                "
              >
                <div
                  class="
                    flex items-center gap-2 text-xs font-medium
                    text-gray-500 bg-gray-50 px-3 py-1.5 rounded-lg border
                    border-gray-100
                  "
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="w-4 h-4 text-gray-400"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.25a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h2.5v2.5a.75.75 0 001.5 0v-2.5h2.5a.75.75 0 000-1.5h-2.5v-2.5z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  Size:
                  <span class="text-gray-900 font-bold"><%= mrp.plant.size %> ft</span>
                </div>

                <%= link_to "https://www.google.com/search?q=#{CGI.escape(mrp.plant.english_name + ' plant')}&tbm=isch", target: "_blank", rel: "noopener noreferrer", class: "inline-flex items-center gap-2 text-sm font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 px-4 py-2 rounded-lg transition-colors" do %>
                  <span>Photos</span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="w-4 h-4"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z"
                      clip-rule="evenodd"
                    />
                    <path
                      fill-rule="evenodd"
                      d="M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                <% end %>
              </div>
            <% else %>
              <p class="text-sm text-gray-400 italic mt-1 mb-4">
                Details will be generated when you create the design...
              </p>
              <div class="h-8"></div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-neutral-500 italic mb-6">
      No plants added yet. Get suggestions or add your own!
    </p>
  <% end %>
</div>
