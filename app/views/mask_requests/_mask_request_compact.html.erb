<% if mask_request.complete? && mask_request.main_view.attached? %>
  <div
    class="
      bg-white/10 rounded-2xl shadow-lg border border-white/20 overflow-hidden
      hover:border-[#00acc1]/50 hover:shadow-[#00acc1]/10 transition-all duration-300
    "
  >
    <%= link_to mask_request_path(mask_request), class: "block relative group" do %>
      <%= image_tag(mask_request.main_view.variant(:dashboard).processed, loading: :lazy, class: "w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105", alt: "#{mask_request.preset.humanize} AI landscape design - #{mask_request.created_at.strftime('%B %Y')}") %>

      <div
        class="
          absolute inset-0 bg-gradient-to-t from-black/60 via-transparent
          to-transparent opacity-60 group-hover:opacity-80
          transition-opacity
        "
      ></div>

      <div class="absolute bottom-4 left-4 right-4 text-white">
        <h3 class="text-xl font-bold leading-tight shadow-black/50 drop-shadow-md text-white">
          <%= mask_request.preset&.humanize %> Design
        </h3>
        <p class="text-sm font-medium opacity-90 mt-1 text-neutral-200">
          <%= time_ago_in_words(mask_request.created_at) %> ago
        </p>
      </div>
    <% end %>

    <div class="p-5 flex items-center justify-between gap-4 border-t border-white/10">
      <div class="flex-1">
        <% if mask_request.user_error.present? %>
          <p
            class="text-xs text-red-500 font-medium truncate"
            title="<%= mask_request.user_error %>"
          >
            <%= mask_request.user_error %>
          </p>
        <% end %>
      </div>

      <%= link_to mask_request_path(mask_request), class: "group inline-flex items-center justify-center px-4 py-2 text-sm font-bold text-white bg-white/10 rounded-xl hover:bg-[#00acc1] hover:text-white transition-all duration-300 gap-2" do %>
        <span>View Details</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="w-4 h-4 group-hover:translate-x-1 transition-transform"
        >
          <path
            fill-rule="evenodd"
            d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z"
            clip-rule="evenodd"
          />
        </svg>
      <% end %>
    </div>
  </div>
<% end %>
