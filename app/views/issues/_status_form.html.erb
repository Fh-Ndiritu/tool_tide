<%# app/views/issues/_status_form.html.erb %>

<%# Requires local variable: issue %>

<%= form_with(model: issue, url: issue_path(issue), method: :patch) do |form| %>
  <div
    class="
      flex flex-col sm:flex-row gap-4 p-4 rounded-lg
      bg-neutral-100 border border-neutral-300
    "
  >
    <div class="flex-1">
      <%= form.label :progress, "Status", class: "text-sm font-medium text-text-dark block mb-1" %>

      <%= form.select :progress,
        Issue.progresses.map { |key, value| [key.humanize, key] },
        {},
        data: { controller: "status-change", action: "change->status-change#handleProgressChange" },
        class: "block shadow-sm rounded-md border border-neutral-500 px-3 py-2 w-full bg-white focus:outline-primary" %>
    </div>

    <div class="flex-1" data-status-change-target="deliveryDateWrapper">
      <%= form.label :delivery_date, "Delivery Date (Optional)", class: "text-sm font-medium text-text-dark block mb-1" %>

      <%= form.date_field :delivery_date,
        class: "block shadow-sm rounded-md border border-neutral-500 px-3 py-2 w-full focus:outline-primary" %>
    </div>

    <div class="sm:self-end pt-2 sm:pt-0">
      <%= form.submit "Update Status",
        class: "w-full sm:w-auto rounded-md px-3 py-2 bg-accent hover:bg-accent-secondary text-text-dark font-medium cursor-pointer transition duration-150 ease-in-out" %>
    </div>
  </div>
<% end %>
