<% content_for :title, "Roadmap & Feedback | Share Your Ideas - Hadaa" %>
<% content_for :description, "View our product roadmap, submit feature requests, and report issues. Help us improve Hadaa's AI garden design tools by sharing your feedback and voting on upcoming features." %>

<div
  class="min-h-screen bg-neutral-50 p-4 sm:p-6 md:p-10"
  data-controller="tabs"
>
  <%# --- Header and STATIC Action Buttons --- %>
  <div
    class="
      flex flex-col sm:flex-row justify-between sm:items-center mb-10
      sm:mb-12 gap-4 sm:gap-0
    "
  >
    <h1 class="font-extrabold text-3xl sm:text-5xl text-text-dark">
      Roadmap & Feedback
    </h1>

    <%# Changed to static buttons (not targets) to prevent Stimulus toggling %>
    <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
      <%# 1. Primary CTA: Submit New Issue (Always visible) %>
      <%= link_to "Submit New Issue", new_issue_path,
          class: "
            w-full rounded-xl px-6 py-3 text-lg font-semibold
            bg-cta-bg hover:bg-cta-bg/90 text-text-dark block text-center
            transition duration-200 ease-in-out transform hover:scale-[1.01]
            shadow-xl shadow-cta-bg/40 focus:outline-none focus:ring-4 focus:ring-cta-bg/50
          " %>

      <%# 2. Admin Feature Button (Conditional, but always visible if admin) %>
      <% if current_user&.admin? %>
        <%= link_to "Propose New Feature", new_feature_path,
            class: "
              w-full rounded-xl px-6 py-3 text-lg font-semibold
              bg-accent hover:bg-accent-secondary text-text-dark block text-center
              transition duration-200 ease-in-out transform hover:scale-[1.01]
              shadow-lg shadow-accent/40
            " %>
      <% end %>
    </div>
  </div>

  <%# --------------------------------------------- %>

  <%# --- Tab Navigation (Features First) --- %>
  <div class="border-b border-neutral-300 mb-8">
    <nav
      class="-mb-px flex sm:space-x-10 space-x-6 min-w-max"
      aria-label="Tabs"
    >
      <%# 1. Roadmap/Features Tab - Index 0 (DEFAULT) - ACTIVE STYLES APPLIED %>
      <button
        data-tabs-target="tab"
        data-action="click->tabs#changeTab"
        data-tabs-index="0"
        class="
          whitespace-nowrap pb-3 px-1 border-b-2 font-extrabold text-base sm:text-xl
          cursor-pointer transition duration-300 ease-in-out
          text-primary border-primary hover:text-primary/70
        "
        aria-current="page"
      >
        Upcoming Features
      </button>

      <%# 2. Issues/Feedback Tab - Index 1 - INACTIVE STYLES APPLIED %>
      <button
        data-tabs-target="tab"
        data-action="click->tabs#changeTab"
        data-tabs-index="1"
        class="
          whitespace-nowrap pb-3 px-1 border-b-2 font-extrabold text-base sm:text-xl
          cursor-pointer transition duration-300 ease-in-out
          text-neutral-500 border-neutral-300 hover:text-text-primary hover:border-text-primary/70
        "
      >
        Feedback & Issues
      </button>
    </nav>
  </div>

  <%# ------------------------ %>

  <%# --- Tab Panels (Features First) --- %>

  <%# 1. Roadmap/Features Panel - Index 0 (Visible by default - NO 'hidden' CLASS) %>
  <div data-tabs-target="panel" id="features" class="min-w-full">
    <%= render "features/features_list", features: @features %>
  </div>

  <%# 2. Issues/Feedback Panel - Index 1 (Hidden by default - 'hidden' CLASS APPLIED) %>
  <div data-tabs-target="panel" id="issues" class="min-w-full hidden">
    <%= render "issues/issues_list", issues: @issues %>
  </div>

  <%# ------------------------ %>
</div>
