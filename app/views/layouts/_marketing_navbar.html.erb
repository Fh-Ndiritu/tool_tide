<nav
  class="px-6 py-4 bg-accent-secondary border-b border-black/5 sticky top-0 z-50 backdrop-blur-md bg-accent-secondary/90 transition-all duration-300"
  data-controller="navbar"
>
  <div class="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center">
    <div class="w-full lg:w-auto flex items-center justify-between mb-0 lg:mb-0 relative">
      <div class="flex-shrink-0">
        <%= link_to root_path, class: "flex items-center gap-3 group" do %>
          <%= image_tag "hadaa.png", alt: "Hadaa", class:"h-10 w-10 rounded-full ring-2 ring-black/5 group-hover:ring-[#00acc1] transition-all duration-300" %>
          <span class="text-xl font-bold text-neutral-900 tracking-tight">Hadaa<span class="text-[#00acc1]">.pro</span></span>
        <% end %>
      </div>

      <%# Mobile link button %>
      <div
        class="lg:hidden ml-auto"
        data-action="click->navbar#toggleMenu"
      >
        <%= render ButtonComponent.new(
                  text: "",
                  classes: "bg-transparent hover:bg-black/5 text-neutral-900 p-2 rounded-lg transition-colors",
                  svg: 'list',
                  svg_classes: "h-6 w-6 text-neutral-900",
                  ) %>
      </div>
    </div>

    <div
      id="navigation-links"
      data-navbar-target="navigationLinks"
      class="
        flex justify-center lg:justify-end hidden lg:flex flex-col
        lg:flex-row max-lg:w-full items-center space-y-4 lg:space-y-0
        lg:space-x-8 lg:flex-1 pb-4 lg:pb-0 pt-4 lg:pt-0
      "
    >
        <%= link_to "Home", root_path, class: marketing_link_class(root_path) %>

        <div
          data-controller="dropdown"
          data-dropdown-hidden-class="hidden"
          class="relative w-full lg:w-auto"
        >
          <button
            data-action="dropdown#toggle"
            class="
              flex items-center gap-1.5 bg-transparent
              focus:outline-none text-neutral-600
              hover:text-[#ce219a] hover:bg-[#ce219a]/15
              px-3 py-2 rounded-lg transition-colors
              w-full lg:w-auto justify-center text-sm font-medium
            "
          >
            <span>Features</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-3.5 w-3.5 opacity-50"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <div
            data-dropdown-target="menu"
            data-dropdown-hidden-class="hidden"
            class="
              hidden relative w-full lg:absolute lg:w-80 lg:left-auto
              lg:translate-x-0 mt-4 lg:mt-2 bg-white rounded-xl shadow-2xl border border-black/5
              z-50 origin-top-right lg:right-0 p-2
            "
          >
            <div class="space-y-1">
              <%= link_to "/features/project-studio", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5 flex items-center gap-2">
                  Project Studio
                  <span class="text-[#ce219a] text-[10px] uppercase border border-[#ce219a]/30 px-1.5 rounded bg-[#ce219a]/10">Core</span>
                </div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Precision Control, Presets & AutoFix
                </div>
              <% end %>

              <%= link_to "/features/preset-style-selection", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Style Presets</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Instant aesthetic transformation
                </div>
              <% end %>

              <%= link_to "/features/ai-prompt-editor", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Prompt Studio</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  AI-assisted design refinement
                </div>
              <% end %>

              <%= link_to "/features/brush-prompt-editor", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Masking Tool</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Precision editing for your landscape
                </div>
              <% end %>

              <%= link_to "/features/location-plant-suggestions", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Plant Finder</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Sustainable, data-driven garden planning
                </div>
              <% end %>

              <%= link_to "/features/shopping-list-planting-guide", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Shopping List</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Automated procurement and execution
                </div>
              <% end %>

              <%= link_to "/features/drone-view-3d-perspective", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Drone View</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  3D perspectives from above
                </div>
              <% end %>

              <%= link_to "/features/intuitive-onboarding", class: "block p-3 rounded-lg hover:bg-gray-50 transition-colors group", data: { action: "click->dropdown#hide" } do %>
                <div class="font-bold text-neutral-900 text-sm mb-0.5">Easy Onboarding</div>
                <div class="text-xs text-neutral-500 group-hover:text-neutral-700">
                  Get started in seconds
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <%= link_to "Pricing", pricing_path, class: marketing_link_class(pricing_path) %>
        <%= link_to "Gallery", explore_path, class: marketing_link_class(explore_path) %>
        <%= link_to "About", about_path, class: marketing_link_class(about_path) %>

        <div class="lg:pl-6 flex flex-col lg:flex-row items-center gap-4 w-full lg:w-auto">
          <%= link_to "Sign In", new_user_session_url(host: Rails.env.production? ? "hadaa.app" : "localhost:3000"), class: "text-sm font-bold text-neutral-900 hover:text-[#00acc1] transition-colors" %>

          <%= link_to new_user_registration_url(host: Rails.env.production? ? "hadaa.app" : "localhost:3000"), class: "w-full lg:w-auto px-5 py-2.5 bg-neutral-900 text-white font-bold text-sm rounded-full hover:bg-neutral-800 transition-colors shadow-lg text-center" do %>
            Get Started
          <% end %>
        </div>
    </div>
  </div>
</nav>
