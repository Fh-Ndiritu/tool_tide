<% if sketch_request.complete? %>
  <div
    class="
      bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden
      hover:shadow-xl transition-shadow duration-300
    "
  >
    <%= link_to sketch_request_path(sketch_request), class: "block relative group" do %>
      <% if sketch_request.photorealistic_view.attached? %>
        <%= image_tag(sketch_request.photorealistic_view.variant(resize_to_limit: [800, 600]), loading: :lazy, class: "w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105") %>
      <% elsif sketch_request.rotated_view.attached? %>
        <%= image_tag(sketch_request.rotated_view.variant(resize_to_limit: [800, 600]), loading: :lazy, class: "w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105") %>
      <% elsif sketch_request.architectural_view.attached? %>
        <%= image_tag(sketch_request.architectural_view.variant(resize_to_limit: [800, 600]), loading: :lazy, class: "w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105") %>
      <% else %>
         <div class="w-full h-64 bg-gray-200 flex items-center justify-center">
            <span class="text-gray-400">No Image Available</span>
         </div>
      <% end %>

      <div
        class="
          absolute inset-0 bg-gradient-to-t from-black/60 via-transparent
          to-transparent opacity-60 group-hover:opacity-80
          transition-opacity
        "
      ></div>

      <div class="absolute bottom-4 left-4 right-4 text-white">
        <h3 class="text-xl font-bold leading-tight shadow-black/50 drop-shadow-md">
          Sketch 3D
        </h3>
        <p class="text-sm font-medium opacity-90 mt-1">
          <%= time_ago_in_words(sketch_request.created_at) %> ago
        </p>
      </div>
    <% end %>

    <div class="p-5 flex items-center justify-between gap-4">
      <div class="flex-1">
         <!-- Status Badge -->
         <span class="inline-flex items-center rounded-md bg-purple-50 px-2 py-1 text-xs font-medium text-purple-700 ring-1 ring-inset ring-purple-700/10">
            <%= sketch_request.progress.humanize %>
         </span>
      </div>

      <%= link_to sketch_request_path(sketch_request), class: "cute-btn btn-primary whitespace-nowrap !py-2 !px-5 flex items-center gap-2" do %>
        <span>View Details</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="w-4 h-4"
        >
          <path
            fill-rule="evenodd"
            d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z"
            clip-rule="evenodd"
          />
        </svg>
      <% end %>
    </div>
  </div>
<% end %>
