<% content_for :title, "My Favorite Designs | Saved Garden Ideas - Hadaa" %>

<% content_for :description, "Access your favorite AI-generated garden and landscape designs. Keep track of inspiring designs you love and revisit them anytime for your landscaping projects." %>

<div class="max-w-4xl mx-auto p-4 md:p-8">
  <h1 class="text-3xl font-bold text-accent mb-6">My Favorites</h1>

  <p class="text-neutral-400 mb-8 text-base">
    Build your personal collection. Look for the
    <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-5 w-5 align-text-bottom text-green-400 mx-1" fill="currentColor" viewBox="0 0 256 256"><path d="M234,80.12A24,24,0,0,0,216,72H160V56a40,40,0,0,0-40-40,8,8,0,0,0-7.16,4.42L75.06,96H32a16,16,0,0,0-16,16v88a16,16,0,0,0,16,16H204a24,24,0,0,0,23.82-21l12-96A24,24,0,0,0,234,80.12ZM32,112H72v88H32ZM223.94,97l-12,96a8,8,0,0,1-7.94,7H88V105.89l36.71-73.43A24,24,0,0,1,144,56V80a8,8,0,0,0,8,8h64a8,8,0,0,1,7.94,9Z"></path></svg>
    and
    <svg xmlns="http://www.w3.org/2000/svg" class="inline-block h-5 w-5 align-text-bottom text-red-400 mx-1" fill="currentColor" viewBox="0 0 256 256"><path d="M239.82,157l-12-96A24,24,0,0,0,204,40H32A16,16,0,0,0,16,56v88a16,16,0,0,0,16,16H75.06l37.78,75.58A8,8,0,0,0,120,240a40,40,0,0,0,40-40V184h56a24,24,0,0,0,23.82-27ZM72,144H32V56H72Zm150,21.29a7.88,7.88,0,0,1-6,2.71H152a8,8,0,0,0-8,8v24a24,24,0,0,1-19.29,23.54L88,150.11V56H204a8,8,0,0,1,7.94,7l12,96A7.87,7.87,0,0,1,222,165.29Z"></path></svg>
    icons on your Dashboard to curate your favorites.
  </p>

  <% if @favorites.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <% @favorites.each do |favorite| %>
        <% favoritable = favorite.favoritable %>

        <% if favoritable %>
          <%# Render the correct partial based on the class of the favorited object %>
          <%= render partial: "favorites/#{favoritable.model_name.param_key}_preview",
                     locals: { favoritable: favoritable, favorite: favorite } %>
        <% else %>
          <%# Handles cases where the original record (text_request or mask_request) was deleted %>
          <div class="bg-white/10 border border-white/20 p-4 rounded-lg shadow-md text-neutral-400">
            Original item not found (ID:
            <%= favorite.favoritable_id %>
            ).
            <%= button_to favorite, method: :delete, data: { confirm: 'Remove this broken favorite?' }, class: "text-red-400 hover:text-red-300 mt-2" do %>
              Remove
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="text-center p-12 bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 shadow-xl">
      <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/10 mb-6 text-neutral-500">
        <%= render(IconComponent.new(classes: "h-8 w-8", name: "heart")) %>
      </div>

      <h3 class="text-xl font-bold text-white mb-2">
        No favorites yet
      </h3>

      <p class="text-neutral-400 max-w-md mx-auto mb-8">
        Your collection is empty. Start generating designs and look for the thumbs up icon to save your masterpieces here.
      </p>

      <%= link_to "Start Designing", new_canva_path, class: "cute-btn accent-btn" %>
    </div>
  <% end %>
</div>
