<%# Local variable 'favoritable' is the MaskRequest object %>

<%# Local variable 'favorite' is the Favorite join record %>

<div
  class="
    bg-white p-4 rounded-2xl shadow-sm border border-neutral-100
    flex flex-col md:flex-row justify-between items-start md:items-center
    hover:shadow-xl hover:border-neutral-200 transition-all duration-300 group
  "
>
  <%# Left Section: Image and Text/Details (Always the link target) %>
  <%= link_to favoritable, class: "flex items-start flex-grow min-w-0" do %>
    <%# Image Container (w-24 h-24) %>
    <div class="flex-shrink-0 w-24 h-24 overflow-hidden rounded-xl mr-5 border border-neutral-100">
      <% if favoritable.main_view.attached? %>
        <%= image_tag favoritable.main_view.variant(resize_to_limit: [120, 120]), class: "w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" %>
      <% else %>
        <div class="w-full h-full bg-neutral-50 flex items-center justify-center">
          <span class="text-neutral-400 text-xs font-medium">No Image</span>
        </div>
      <% end %>
    </div>

    <%# Text Details %>
    <div class="flex flex-col justify-center min-w-0 py-1 space-y-1">
      <div class="flex items-center gap-2">
        <span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider">
           <%= favoritable.preset.try(:humanize) || "Garden" %>
        </span>
      </div>

      <p class="text-base font-bold text-gray-900 line-clamp-1 group-hover:text-primary transition-colors">
        Garden Design
      </p>

      <p class="text-xs text-neutral-500 font-medium">
        Created <%= time_ago_in_words(favoritable.created_at) %> ago
      </p>
    </div>
  <% end %>

  <%# Right Section: Favorite Button %>
  <div class="mt-4 md:mt-0 md:ml-6 flex-shrink-0 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-200">
    <%= render 'favorites/favorite_button',
        favoritable: favoritable,
        favorite: favorite %>
  </div>
</div>
