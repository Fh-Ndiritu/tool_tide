<%# Local variable 'favoritable' is the TextRequest object %>

<%# Local variable 'favorite' is the Favorite join record %>

<div
  class="
    bg-white p-4 rounded-2xl shadow-sm border border-neutral-100
    flex flex-col md:flex-row justify-between items-start md:items-center
    hover:shadow-xl hover:border-neutral-200 transition-all duration-300 group
  "
>
  <%# Left Section: Image and Text/Prompt (Always the link target) %>
  <%= link_to text_requests_path(current_request: favoritable.id), class: "flex items-start flex-grow min-w-0" do %>
    <%# Image Container (w-24 h-24) %>
    <div class="flex-shrink-0 w-24 h-24 overflow-hidden rounded-xl mr-5 border border-neutral-100">
      <% if favoritable.result_image.attached? %>
        <%= image_tag favoritable.result_image.variant(resize_to_limit: [120, 120]), class: "w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" %>
      <% else %>
        <div class="w-full h-full bg-neutral-50 flex items-center justify-center">
          <span class="text-neutral-400 text-xs font-medium">No Image</span>
        </div>
      <% end %>
    </div>

    <%# Text Details %>
    <div class="flex flex-col justify-center min-w-0 py-1 space-y-1">
      <div class="flex items-center gap-2">
         <span class="bg-blue-100 text-blue-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider">
           Smart Fix
         </span>
      </div>

      <p class="text-sm text-neutral-600 line-clamp-2 leading-relaxed group-hover:text-neutral-900 transition-colors">
        <%= favoritable.prompt %>
      </p>

      <p class="text-xs text-neutral-500 font-medium pt-1">
        Created <%= time_ago_in_words(favoritable.created_at) %> ago
      </p>
    </div>
  <% end %>


</div>
