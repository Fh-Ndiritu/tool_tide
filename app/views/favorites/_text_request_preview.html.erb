<%# Local variable 'favoritable' is the TextRequest object %>
<%# Local variable 'favorite' is the Favorite join record %>
<div class="
  bg-[#c6d4ee] p-3 rounded-lg shadow-md
  flex flex-col md:flex-row justify-between items-start md:items-center
  hover:bg-[#d1cbfc] hover:shadow-lg transition duration-200
">

  <%# Left Section: Image and Text/Prompt (Always the link target) %>
  <%= link_to text_requests_path(current_request: favoritable.id), class: "flex items-start flex-grow min-w-0" do %>

    <%# Image Container (w-24 h-24) %>
    <div class="flex-shrink-0 w-24 h-24 overflow-hidden rounded-md mr-4">
      <% if favoritable.result_image.attached? %>
        <%= image_tag favoritable.result_image.variant(resize_to_limit: [120, 120]), class: "w-full h-full object-cover" %>
      <% else %>
        <div class="w-full h-full bg-neutral-300 flex items-center justify-center">
          <span class="text-neutral-700 text-xs">No Image</span>
        </div>
      <% end %>
    </div>

    <%# Text Details: Primary and Secondary text colors adjusted %>
    <div class="flex flex-col justify-center min-w-0 py-1">
      <p class="text-sm font-semibold text-text-dark line-clamp-1">
        AI Edit
      </p>
      <p class="text-xs text-neutral-700 line-clamp-2 mt-1">
        <%= favoritable.prompt.truncate(80) %>
      </p>
      <%# CHANGE: Increased contrast for source/date text (text-neutral-700) %>
      <span class="text-xs text-neutral-700 mt-1">
        Created: <%= favoritable.created_at.to_date.to_fs(:short) %>
      </span>
    </div>
  <% end %>

  <%# Right Section: Favorite Button %>
  <div class="mt-3 md:mt-0 md:ml-4 flex-shrink-0">
    <%= render 'favorites/favorite_button',
        favoritable: favoritable,
        favorite: favorite %>
  </div>
</div>
