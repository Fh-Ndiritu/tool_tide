<% turbo_frame_id ||= "favorite_#{favoritable.to_global_id.to_param}" %>

<%= turbo_frame_tag turbo_frame_id do %>
  <div class="flex items-center">
    <% if favorite && favorite.liked? %>
      <%# STATE: LIKED (Green button active) %>
      <%# Action: DELETE /favorites/:id (Unset vote) %>
      <%= button_to favorite, method: :delete, data: { turbo_frame: turbo_frame_id }, title: "Remove like", class: "icon-btn bg-green-500 hover:bg-green-600 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg text-white hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current fill-current", name: "thumbs_up")) %>
      <% end %>
      <%# Action: POST /favorites (Change to Dislike) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'dislike'), method: :post, data: { turbo_frame: turbo_frame_id }, title: "Dislike design", class: "icon-btn bg-white/90 hover:bg-red-500 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg ml-2 text-gray-400 hover:text-white backdrop-blur-sm hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_down")) %>
      <% end %>
    <% elsif favorite && !favorite.liked? %>
      <%# Action: POST /favorites (Change to Like) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'like'), method: :post, data: { turbo_frame: turbo_frame_id }, title: "Like design", class: "icon-btn bg-white/90 hover:bg-green-500 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg text-gray-400 hover:text-white backdrop-blur-sm hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_up")) %>
      <% end %>
      <%# STATE: DISLIKED (Red button active) %>
      <%# Action: DELETE /favorites/:id (Unset vote) %>
      <%= button_to favorite, method: :delete, data: { turbo_frame: turbo_frame_id }, title: "Remove dislike", class: "icon-btn bg-red-500 hover:bg-red-600 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg ml-2 text-white hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current fill-current", name: "thumbs_down")) %>
      <% end %>
    <% else %>
      <%# STATE: DEFAULT/NEUTRAL (No vote exists) %>
      <%# Action: POST /favorites (Create Like) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'like'), method: :post, data: { turbo_frame: turbo_frame_id }, title: "Like design", class: "icon-btn bg-white/90 hover:bg-green-500 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg text-gray-400 hover:text-white backdrop-blur-sm hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_up")) %>
      <% end %>
      <%# Action: POST /favorites (Create Dislike) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'dislike'), method: :post, data: { turbo_frame: turbo_frame_id }, title: "Dislike design", class: "icon-btn bg-white/90 hover:bg-red-500 transition-all duration-300 rounded-full p-2 md:p-3 shadow-lg ml-2 text-gray-400 hover:text-white backdrop-blur-sm hover:scale-105" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_down")) %>
      <% end %>
    <% end %>
  </div>
<% end %>
