<% turbo_frame_id ||= "favorite_#{favoritable.to_global_id.to_param}" %>

<%= turbo_frame_tag turbo_frame_id do %>
  <div class="flex items-center">
    <% if favorite && favorite.liked? %>
      <%# STATE: LIKED (Green button active) %>
      <%# Action: DELETE /favorites/:id (Unset vote) %>
      <%= button_to favorite, method: :delete, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-green-600 hover:bg-green-700 transition duration-150 rounded-full p-2 md:p-3 shadow-lg text-white" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current fill-current", name: "thumbs_up")) %>
      <% end %>
      <%# Action: POST /favorites (Change to Dislike) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'dislike'), method: :post, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-neutral-900/80 hover:bg-red-600 transition duration-150 rounded-full p-2 md:p-3 shadow-lg ml-2 text-neutral-400 hover:text-white backdrop-blur-sm" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_down")) %>
      <% end %>
    <% elsif favorite && !favorite.liked? %>
      <%# Action: POST /favorites (Change to Like) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'like'), method: :post, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-neutral-900/80 hover:bg-green-600 transition duration-150 rounded-full p-2 md:p-3 shadow-lg text-neutral-400 hover:text-white backdrop-blur-sm" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_up")) %>
      <% end %>
      <%# STATE: DISLIKED (Red button active) %>
      <%# Action: DELETE /favorites/:id (Unset vote) %>
      <%= button_to favorite, method: :delete, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-red-600 hover:bg-red-700 transition duration-150 rounded-full p-2 md:p-3 shadow-lg ml-2 text-white" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current fill-current", name: "thumbs_down")) %>
      <% end %>
    <% else %>
      <%# STATE: DEFAULT/NEUTRAL (No vote exists) %>
      <%# Action: POST /favorites (Create Like) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'like'), method: :post, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-neutral-900/80 hover:bg-green-600 transition duration-150 rounded-full p-2 md:p-3 shadow-lg text-neutral-400 hover:text-white backdrop-blur-sm" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_up")) %>
      <% end %>
      <%# Action: POST /favorites (Create Dislike) %>
      <%= button_to favorites_path(favoritable_type: favoritable.class.name, favoritable_id: favoritable.id, vote_type: 'dislike'), method: :post, data: { turbo_frame: turbo_frame_id }, class: "icon-btn bg-neutral-900/80 hover:bg-red-600 transition duration-150 rounded-full p-2 md:p-3 shadow-lg ml-2 text-neutral-400 hover:text-white backdrop-blur-sm" do %>
        <%= render(IconComponent.new(classes: "h-5 w-5 md:h-6 md:w-6 text-current stroke-current", name: "thumbs_down")) %>
      <% end %>
    <% end %>
  </div>
<% end %>
